---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==âš   Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. âš == You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data

## Text Elements
T1 ^yD8yPse0

T2 ^Dv3CW3H2

ðŸ”¹ T1 starts and reads a row, acquiring a shared lock (S) ^tVWa2AbY

SELECT... ^MASn3RhG

ðŸ”¹ T2 tries to delete the row, but T1â€™s shared lock (S) blocks it ^FRat4E62

DELETE... ^Rpcg6deS

This transaction
is blocked as
this row has
a shared lock,
and we're trying
to write ^Gy3ZK8xy

} ^FwwqHfpl

Once T1 commits,
we can now obtain the shared or exclusive lock, and can delete that row ^qQrJW98w

ðŸ”¹ T1 reads the price again (same value), ensuring no phantom read ^ACPBjBSQ

SELECT... ^tjs6PxFG

Commit, Releasing Lock ^Rsrphecw

%%
## Drawing
```compressed-json
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
```
%%